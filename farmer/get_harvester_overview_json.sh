#!/bin/bash
curl -s --insecure --cert ~/.chia/mainnet/config/ssl/farmer/private_farmer.crt --key ~/.chia/mainnet/config/ssl/farmer/private_farmer.key -d '{}' -H "Content-Type: application/json" -X POST https://localhost:8559/get_harvesters | jq -r '.harvesters[] | {(.connection.node_id): {"host": .connection.host,"port":.connection.port, "plots_overall":(.plots| length), "plots_OG":([select(.plots[].pool_public_key!=null)]| length),"plots_NFT":([select(.plots[].pool_contract_puzzle_hash!=null)]| length),"bytes_overall": ([.plots[].file_size] | reduce .[] as $item (0; . + $item)),"failed_to_open_filenames":(.failed_to_open_filenames| length), "no_key_filenames": (.no_key_filenames| length)}}'
